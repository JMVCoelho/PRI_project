try include stdio h include x xlib h include x xutil h display dpy int screen xcolor xclrs xclrp xid cmap int cells j red green blue got main dpy xopendisplay null screen defaultscreen dpy cells displaycells dpy screen cmap xcreatecolormap dpy rootwindow dpy screen defaultvisual dpy screen xclrs xcolor malloc cells sizeof xclrs xclrp xclrs cells xclrp pixel xclrp flags xclrp xquerycolors dpy defaultcolormap dpy screen xclrs cells xstorecolors dpy cmap xclrs cells xinstallcolormap dpy cmap got got xclrp xclrs got cells xclrp red xclrp red got xclrp green xclrp green got xclrp blue xclrp blue got xclrp xstorecolors dpy cmap xclrs cells xinstallcolormap dpy cmap got got xclrp xclrs got cells xclrp red xclrp red got xclrp green xclrp green got xclrp blue xclrp blue got xclrp xstorecolors dpy cmap xclrs cells xinstallcolormap dpy cmap work pseudocolor xserverhopefully