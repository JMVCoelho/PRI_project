code fragment looks reasonable logic validsomething appears bit deep pixmap mean every bit plane contains datatry plane